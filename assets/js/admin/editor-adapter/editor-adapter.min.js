!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=Backbone.Collection.extend({})},{}],2:[function(a,b,c){arguments[4][1][0].apply(c,arguments)},{dup:1}],3:[function(a,b,c){var d={};window.setkaEditorAdapter=d,d.model={Form:a("./model/Form"),EditorConfig:a("./model/EditorConfig"),EditorResources:a("./model/EditorResources"),Theme:a("./model/Theme"),Layout:a("./model/Layout")},d.collection={Themes:a("./collection/Themes"),Layouts:a("./collection/Layouts")},d.view={scripts:{TypeKitScript:a("./view/scripts/TypeKitScript")},Page:a("./view/Page"),HTML:a("./view/HTML"),screenMeta:{EditorExpand:a("./view/screen-meta/EditorExpand")},notices:{Prototype:a("./view/notices/Prototype"),SetkaEditorCantFindResources:a("./view/notices/SetkaEditorCantFindResources"),SetkaEditorThemeDisabled:a("./view/notices/SetkaEditorThemeDisabled"),SetkaEditorSaveSnippet:a("./view/notices/SetkaEditorSaveSnippet")},AddMediaButton:a("./view/AddMediaButton"),EditorTabs:a("./view/editor-tabs/EditorTabs"),EditorTabDefault:a("./view/editor-tabs/TabDefault"),EditorTabSetka:a("./view/editor-tabs/TabSetka"),Editor:a("./view/EditorSetka"),EditorDefault:a("./view/EditorDefault"),postStuff:{PostStuff:a("./view/poststuff/PostStuff"),postBody:{PostBody:a("./view/poststuff/post-body/PostBody")}},AdminMenu:a("./view/AdminMenu"),Form:a("./view/form/Form"),Settings:a("./view/form/Settings"),Nonce:a("./view/form/Nonce"),PostId:a("./view/form/PostId"),pointers:{DisabledTabsPointer:a("./view/pointers/DisabledTabsPointer")}},d.utils={editorExpand:{EditorExpand:a("./utils/editor-expand/EditorExpand")},AutoSave:a("./utils/AutoSave"),autop:a("./utils/autop"),SaveSnippet:a("./utils/SaveSnippet"),TypeKitScriptsManager:a("./utils/TypeKitScriptsManager")}},{"./collection/Layouts":1,"./collection/Themes":2,"./model/EditorConfig":4,"./model/EditorResources":5,"./model/Form":6,"./model/Layout":7,"./model/Theme":8,"./utils/AutoSave":9,"./utils/SaveSnippet":10,"./utils/TypeKitScriptsManager":11,"./utils/autop":12,"./utils/editor-expand/EditorExpand":13,"./view/AddMediaButton":14,"./view/AdminMenu":15,"./view/EditorDefault":16,"./view/EditorSetka":17,"./view/HTML":18,"./view/Page":19,"./view/editor-tabs/EditorTabs":20,"./view/editor-tabs/TabDefault":21,"./view/editor-tabs/TabSetka":22,"./view/form/Form":23,"./view/form/Nonce":24,"./view/form/PostId":25,"./view/form/Settings":26,"./view/notices/Prototype":27,"./view/notices/SetkaEditorCantFindResources":28,"./view/notices/SetkaEditorSaveSnippet":29,"./view/notices/SetkaEditorThemeDisabled":30,"./view/pointers/DisabledTabsPointer":31,"./view/poststuff/PostStuff":32,"./view/poststuff/post-body/PostBody":33,"./view/screen-meta/EditorExpand":34,"./view/scripts/TypeKitScript":35}],4:[function(a,b,c){b.exports=Backbone.Model.extend({})},{}],5:[function(a,b,c){var d=window.setkaEditorAdapter;b.exports=Backbone.Model.extend({initialize:function(){this._setupThemes(),this._setupLayouts()},_setupThemes:function(){var a=new d.collection.Themes;_.each(this.get("themes"),function(b,c,e){a.add(new d.model.Theme(b))}),this.set("themes",a)},_setupLayouts:function(){var a=new d.collection.Layouts;_.each(this.get("layouts"),function(b,c,e){a.add(new d.model.Layout(b))}),this.set("layouts",a)},getThemeBySlug:function(a){return this.get("themes").findWhere({id:a})},getThemeById:function(a){return this.get("themes").findWhere({theme_id:a})},getLayoutBySlug:function(a){return this.get("layouts").findWhere({id:a})},toJSON:function(a){var b=_.clone(this.attributes);return b.themes=b.themes.toJSON(),b.layouts=b.layouts.toJSON(),b}})},{}],6:[function(a,b,c){b.exports=Backbone.Model.extend({defaults:{postId:null,textareaId:null,editorInitialized:!1,editorConfig:{},editorContent:"",useSetkaEditor:!1,postBoxesColumns:null,postBoxContainer1Hovered:!1},initialize:function(){_.bindAll(this,"onEditorInitializedChanged");var a=this.get("useSetkaEditor");_.isBoolean(a)||("1"===a?this.set("useSetkaEditor",!0):this.set("useSetkaEditor",!1)),this.addEvents()},addEvents:function(){this.on("change:editorInitialized",this.onEditorInitializedChanged)},onEditorInitializedChanged:function(){this.set("useSetkaEditor",this.get("editorInitialized"))},getDataForAutosave:function(){return{useSetkaEditor:this.get("useSetkaEditor")?"1":"0",editorConfig:this.get("editorConfig").toJSON(),_wpnonce:this.get("nonce"),postId:this.get("postId")}}})},{}],7:[function(a,b,c){b.exports=Backbone.Model.extend({})},{}],8:[function(a,b,c){b.exports=Backbone.Model.extend({isDisabled:function(){var a=this.get("disabled");return!_.isUndefined(this.get("disabled"))&&a===!0},getTypeKidId:function(){var a=this.get("kit_id");return _.isUndefined(a)&&(a=""),a}})},{}],9:[function(a,b,c){var d=jQuery,e=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({DOM:{},initialize:function(){_.bindAll(this,"save","onHeartBeatSend","onHeartBeatTick"),this.setupDOM(),this.addEvents()},setupDOM:function(){this.DOM.document=d(document)},addEvents:function(){this.DOM.document.on("heartbeat-send."+e.names.css,this.onHeartBeatSend),this.DOM.document.on("heartbeat-tick."+e.names.css,this.onHeartBeatTick),this.enable()},enable:function(){this.model.get("editorConfig").on("change",this.save),this.model.on("change:useSetkaEditor",this.save),this.model.on("change:postId",this.save)},disable:function(){this.model.get("editorConfig").off("change",this.save),this.model.off("change:useSetkaEditor",this.save),this.model.off("change:postId",this.save)},save:function(){window.wp.heartbeat.enqueue(e.names.css,this.model.getDataForAutosave(),!1)},onHeartBeatSend:function(a,b){_.isUndefined(b[e.names.css])&&_.isUndefined(b.wp_autosave)||(b[e.names.css]=this.model.getDataForAutosave())},onHeartBeatTick:function(a,b){}})},{}],10:[function(a,b,c){var d=jQuery,e=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({initialize:function(){_.bindAll(this,"addSnippet"),this.addEvents()},addEvents:function(){ContentEdit.Root.get().bind("ADD_SNIPPET",this.addSnippet)},addSnippet:function(a){var b=this.model.get("editorResources").getThemeBySlug(a.themeId);_.isEmpty(b)||(a.theme_id=b.get("theme_id"),this.saveSnippet(a))},saveSnippet:function(a){Backbone.trigger("setka:editor:adapter:editors:setka:snippet:save:start",a);d.ajax({url:ajaxurl,type:"post",timeout:3e4,data:{action:e.names._+"_save_setka_editor_snippet",data:JSON.stringify(a)},dataType:"json",jsonp:!1}).done(function(b){Backbone.trigger("setka:editor:adapter:editors:setka:snippet:done",a,b)}).fail(function(b,c,d){Backbone.trigger("setka:editor:adapter:editors:setka:snippet:fail",a,b,c,d)})}})},{}],11:[function(a,b,c){var d=window.setkaEditorAdapter;b.exports=Backbone.View.extend({views:{},initialize:function(){_.bindAll(this,"onTypeKitIdChanged"),this.addEvents(),this.onTypeKitIdChanged()},addEvents:function(){this.model.get("editorConfig").on("change:typeKitId",this.onTypeKitIdChanged)},onTypeKitIdChanged:function(){var a=this.model.get("editorConfig").get("typeKitId");_.isString(a)&&""!=a&&_.isUndefined(this.views[a])&&(this.views[a]=new d.view.scripts.TypeKitScript({model:new Backbone.Model({id:a})}),this.views[a].render())}})},{}],12:[function(a,b,c){b.exports=function(a){var b=!1,c=!1,d="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";return a=a.replace(/\r\n|\r/g,"\n"),a.indexOf("\n")===-1?a:(a.indexOf("<object")!==-1&&(a=a.replace(/<object[\s\S]+?<\/object>/g,function(a){return a.replace(/\n+/g,"")})),a=a.replace(/<[^<>]+>/g,function(a){return a.replace(/[\n\t ]+/g," ")}),a.indexOf("<pre")===-1&&a.indexOf("<script")===-1||(b=!0,a=a.replace(/<(pre|script)[^>]*>[\s\S]*?<\/\1>/g,function(a){return a.replace(/\n/g,"<wp-line-break>")})),a.indexOf("[caption")!==-1&&(c=!0,a=a.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(a){return a=a.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),a=a.replace(/<[^<>]+>/g,function(a){return a.replace(/[\n\t ]+/," ")}),a.replace(/\s*\n\s*/g,"<wp-temp-br />")})),a+="\n\n",a=a.replace(/<br \/>\s*<br \/>/gi,"\n\n"),a=a.replace(new RegExp("(<(?:"+d+")(?: [^>]*)?>)","gi"),"\n$1"),a=a.replace(new RegExp("(</(?:"+d+")>)","gi"),"$1\n\n"),a=a.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),a=a.replace(/\s*<option/gi,"<option"),a=a.replace(/<\/option>\s*/gi,"</option>"),a=a.replace(/\n\s*\n+/g,"\n\n"),a=a.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),a=a.replace(/<p>\s*?<\/p>/gi,""),a=a.replace(new RegExp("<p>\\s*(</?(?:"+d+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/<p>(<li.+?)<\/p>/gi,"$1"),a=a.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),a=a.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),a=a.replace(new RegExp("<p>\\s*(</?(?:"+d+")(?: [^>]*)?>)","gi"),"$1"),a=a.replace(new RegExp("(</?(?:"+d+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/(<br[^>]*>)\s*\n/gi,"$1"),a=a.replace(/\s*\n/g,"<br />\n"),a=a.replace(new RegExp("(</?(?:"+d+")[^>]*>)\\s*<br />","gi"),"$1"),a=a.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),a=a.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),a=a.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(a,b,c){return c.match(/<p( [^>]*)?>/)?a:b+"<p>"+c+"</p>"}),b&&(a=a.replace(/<wp-line-break>/g,"\n")),c&&(a=a.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),a)}},{}],13:[function(a,b,c){var d=jQuery;b.exports=Backbone.View.extend({DOM:{},initialize:function(){_.bindAll(this,"autoOff","lateInit"),this.setupDOM(),setTimeout(this.lateInit,3e3)},lateInit:function(){this.addEvents(),this.autoOff()},setupDOM:function(){this.DOM.document=d(document)},addEvents:function(){this.model.on("change:editorInitialized",this.autoOff),this.DOM.document.on("editor-expand-on",this.autoOff)},autoOff:function(){this.model.get("editorInitialized")&&this.off()},off:function(){_.isUndefined("window.editorExpand")||window.editorExpand.off()},on:function(){_.isUndefined("window.editorExpand")||window.editorExpand.on()}})},{}],14:[function(a,b,c){b.exports=Backbone.View.extend({el:"#insert-media-button",initialize:function(){this.addEvents()},addEvents:function(){_.bindAll(this,"onEditorInitialized"),this.model.on("change:editorInitialized",this.onEditorInitialized)},onEditorInitialized:function(){this.model.get("editorInitialized")?this.hide():this.show()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}})},{}],15:[function(a,b,c){var d=jQuery;b.exports=Backbone.View.extend({el:"#adminmenu",DOM:{},initialize:function(){this.setupDOM()},setupDOM:function(){this.DOM.body=d(document.body),this.DOM.collapseButton=d("#collapse-button")},isFolded:function(){return this.DOM.body.hasClass("folded")},fold:function(){this.isFolded()||this.DOM.collapseButton.trigger("click.collapse-menu")},unFold:function(){this.isFolded()&&this.DOM.collapseButton.trigger("click.collapse-menu")}})},{}],16:[function(a,b,c){b.exports=Backbone.View.extend({DOM:{},initialize:function(){this.setupDOM(),this.syncModel(),_.bindAll(this,"sync")},setupDOM:function(){this.DOM.textarea=this.$("#"+this.model.get("textareaId"))},render:function(){return this.setContent(),this},show:function(){this.$el.show()},hide:function(){this.$el.hide()},getContent:function(){return this.DOM.textarea.val()},setContent:function(){this.DOM.textarea.val(this.model.get("editorContent"))},sync:function(){this.setContent()},syncModel:function(){this.model.set("editorContent",this.getContent())}})},{}],17:[function(a,b,c){var d=window.setkaEditorAdapter,e=window.setkaEditorAdapterL10n;$=jQuery,b.exports=Backbone.View.extend({DOM:{},attributes:function(){return{id:"content-"+e.names.css,class:e.names.css+"-wrapper",style:"display: none;"}},initialize:function(){this.setupDOM(),this.addEvents()},setupDOM:function(){this.DOM.document=$(document)},addEvents:function(){_.bindAll(this,"onLayoutChanged","onThemeChanged","recalculateWidth"),window.ContentEdit.Root.get().bind("post:layout",this.onLayoutChanged),window.ContentEdit.Root.get().bind("post:theme",this.onThemeChanged),this.DOM.document.on("wp-collapse-menu",this.recalculateWidth)},render:function(){return this.DOM.stk_editor_wrapper_2=$("<div></div>").addClass(e.names.css+"-wrapper-2"),this.$el.append(this.DOM.stk_editor_wrapper_2),this},show:function(){if(!this.model.get("editorInitialized")){var a=this.model.get("editorContent");a=this._preparePlainContent(a),this.DOM.stk_editor_wrapper_2.html('<div id="setka-editor" class="stk-editor"></div>'),this.$el.show(),this._start(),this.model.set("editorInitialized",!0),$("body").trigger("resize").trigger("scroll"),this.setContent(a),this.onContentChanged=this.onContentChanged.bind(this),window.ContentEdit.Root.get().bind("taint",this.onContentChanged),this.DOM.stk_editor=this.$(".stk-editor"),Backbone.trigger("setka:editor:adapter:editors:setka:launch")}},afterShow:function(){this.recalculateWidth()},hide:function(){this._stop(),this.model.set("editorInitialized",!1),this.$el.hide(),Backbone.trigger("setka:editor:adapter:editors:setka:stop")},getContent:function(){return SetkaEditor.getHTML()},setContent:function(a){SetkaEditor.replaceHTML(a)},getWidth:function(){return this.DOM.stk_editor.outerWidth()},setTheme:function(a){return SetkaEditor.post.setTheme(a),this},getTheme:function(){return SetkaEditor.getCurrentTheme()},setLayout:function(a){return SetkaEditor.post.setLayout(a),this},getLayout:function(){return SetkaEditor.getCurrentLayout()},_preparePlainContent:function(a){var b=document.createElement("div");b.innerHTML=a;for(var c="",e=!1,f=0;f<b.childNodes.length;f++){var g=b.childNodes[f];if(3===g.nodeType){if(""===g.textContent.trim())continue;var h=d.utils.autop(g.textContent);h.indexOf("<p>")===-1&&(h="<p>"+h+"</p>"),c+=h,e=!0}else jQuery(g).hasClass("stk-post")||(e=!0),c+=g.outerHTML}return e&&(c='<div class="stk-post">'+c+"</div>"),c},_start:function(){var a=this.model.get("editorConfig").toJSON(),b=this.model.get("editorResources").toJSON();SetkaEditor.start(a,b);var c=this.getLayout(),d=this.getTheme();this.model.get("editorConfig").set("layout",c.id),this.model.get("editorConfig").set("theme",d.id);var e=this.model.get("editorResources").getThemeBySlug(d.id).getTypeKidId();this.model.get("editorConfig").set("typeKitId",e)},_stop:function(){SetkaEditor.stop()},recalculateWidth:function(){window.ContentEdit.Root.get().trigger("editor:width")},onContentChanged:function(){this.model.set("editorContent",this.getContent())},onLayoutChanged:function(a){this.model.get("editorConfig").set("layout",a)},onThemeChanged:function(a){this.model.get("editorConfig").set("theme",a);var b=this.model.get("editorResources").getThemeBySlug(a),c=b.getTypeKidId();this.model.get("editorConfig").set("typeKitId",c)},isRequiredResourcesAvailable:function(){var a=this.model.get("editorResources").getThemeBySlug(this.model.get("editorConfig").get("theme"));if(_.isEmpty(a))return!1;var b=this.model.get("editorResources").getLayoutBySlug(this.model.get("editorConfig").get("layout"));return!_.isEmpty(b)},isThemeDisabled:function(){var a=this.model.get("editorConfig").get("theme");return this.model.get("editorResources").getThemeBySlug(a).isDisabled()}})},{}],18:[function(a,b,c){b.exports=Backbone.View.extend({el:"html",initialize:function(){_.bindAll(this,"setkaEditorEnabled","setkaEditorDisabled"),this.addEvents()},addEvents:function(){Backbone.on("setka:editor:adapter:editors:setka:launch",this.setkaEditorEnabled),Backbone.on("setka:editor:adapter:editors:setka:stop",this.setkaEditorDisabled)},setkaEditorEnabled:function(){this.$el.addClass("wpstkeditor")},setkaEditorDisabled:function(){this.$el.removeClass("wpstkeditor")}})},{}],19:[function(a,b,c){var d=window.setkaEditorAdapter,e=jQuery,f=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({views:{},utils:{},DOM:{},initialize:function(){this.setupDOM(),this.createUtils(),this.createSubViews(),_.bindAll(this,"switchToSetkaEditor","switchToDefaultEditor","onPostBoxesColumns"),this.addEvents(),this.render(),this.model.get("useSetkaEditor")&&this.switchToSetkaEditor()},setupDOM:function(){this.DOM.wp_content_wrap=e("#wp-content-wrap")},createUtils:function(){this.utils.autosave=new d.utils.AutoSave({model:this.model}),this.utils.editorExpand={editorExpand:new d.utils.editorExpand.EditorExpand({model:this.model})},this.utils.saveSnippet=new d.utils.SaveSnippet({model:this.model}),this.utils.typeKitScriptsManagaer=new d.utils.TypeKitScriptsManager({model:this.model})},createSubViews:function(){this.views.html=new d.view.HTML,this.views.adminMenu=new d.view.AdminMenu,this.views.screenMeta={editorExpand:new d.view.screenMeta.EditorExpand},this.views.notices={setkaEditorCantFindResources:new d.view.notices.SetkaEditorCantFindResources,setkaEditorThemeDisabled:new d.view.notices.SetkaEditorThemeDisabled,setkaEditorSaveSnippet:new d.view.notices.SetkaEditorSaveSnippet},this.views.postStuff=new d.view.postStuff.PostStuff({model:this.model}),this.views.form=new d.view.Form({model:this.model}),this.views.addMediaButton=new d.view.AddMediaButton({model:this.model}),this.views.editorTabs=new d.view.EditorTabs({el:"#wp-"+this.model.get("textareaId")+"-wrap .wp-editor-tabs",model:this.model}),this.views.editorDefault=new d.view.EditorDefault({el:"#wp-"+this.model.get("textareaId")+"-editor-container",model:this.model}),this.views.setkaEditor=new d.view.Editor({model:this.model}),this.views.pointers={disabledTabs:new d.view.pointers.DisabledTabsPointer}},addEvents:function(){Backbone.on("setka:editor:adapter:editorTabs:setka:click",this.switchToSetkaEditor),Backbone.on("setka:editor:adapter:editorTabs:default:click",this.switchToDefaultEditor)},render:function(){this.views.form.render(),this.views.editorTabs.render(),this.views.setkaEditor.render(),this.DOM.wp_content_wrap.append(this.views.setkaEditor.$el)},switchToSetkaEditor:function(){return this.views.setkaEditor.isRequiredResourcesAvailable()?(Backbone.trigger("setka:editor:adapter:editors:setka:requiredResourcesAvailable"),this.views.setkaEditor.isThemeDisabled()?Backbone.trigger("setka:editor:adapter:editors:setka:themeDisabled"):Backbone.trigger("setka:editor:adapter:editors:setka:themeEnabled"),this.views.editorDefault.syncModel(),_.isUndefined(window.switchEditors)||window.switchEditors.go(this.model.get("textareaId"),"html"),this.DOM.wp_content_wrap.removeClass("html-active tmce-active").addClass(f.names.css+"-active"),this.views.setkaEditor.show(),this.views.editorDefault.hide(),this.views.editorTabs.muteDefaults(),this.model.on("change:editorContent",this.views.editorDefault.sync),this.isEditorFitToSize()||this.views.adminMenu.fold(),this.isEditorFitToSize()||2!==this.model.get("postBoxesColumns")||this.views.postStuff.collapse(),this.model.on("change:postBoxesColumns",this.onPostBoxesColumns),void this.views.setkaEditor.afterShow()):void Backbone.trigger("setka:editor:adapter:editors:setka:requiredResourcesNotAvailable")},switchToDefaultEditor:function(){this.DOM.wp_content_wrap.removeClass(f.names.css+"-active").addClass("html-active"),this.views.editorDefault.show(),this.views.setkaEditor.hide(),this.views.editorTabs.unMuteDefaults(),this.model.off("change:editorContent",this.views.editorDefault.sync),this.model.off("change:postBoxesColumns",this.onPostBoxesColumns),this.views.postStuff.unCollapse()},isEditorFitToSize:function(){return this.views.postStuff.views.postBody.$el.width()>=this.views.setkaEditor.getWidth()},onPostBoxesColumns:function(){1===this.model.get("postBoxesColumns")?this.views.postStuff.unCollapse():this.isEditorFitToSize()||this.views.postStuff.collapse(),this.views.setkaEditor.recalculateWidth()}})},{}],20:[function(a,b,c){var d=(jQuery,window.setkaEditorAdapter);b.exports=Backbone.View.extend({views:{defaults:{},setka:null},initialize:function(){this.createSubViews()},createSubViews:function(){_.bindAll(this,"createDefaultTabsViews"),this.$(".wp-switch-editor").each(this.createDefaultTabsViews),this.views.setka=new d.view.EditorTabSetka},createDefaultTabsViews:function(a,b){this.views.defaults[a]=new d.view.EditorTabDefault({el:b,model:this.model})},render:function(){return this.views.setka.render(),this.$el.append(this.views.setka.$el),this},hideDefaults:function(){_.each(this.views.defaults,function(a){a.$el.hide()})},muteDefaults:function(){_.each(this.views.defaults,function(a){a.mute()})},unMuteDefaults:function(){_.each(this.views.defaults,function(a){a.unMute()})}})},{}],21:[function(a,b,c){var d=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({events:{click:"onClick"},classes:{muted:d.names.css+"-switch-editor-muted"},onClick:function(a){this.model.get("editorInitialized")&&(Backbone.trigger("setka:editor:adapter:defaultTabClick",a),a.stopImmediatePropagation())},mute:function(){return this.$el.addClass(this.classes.muted),this},unMute:function(){return this.$el.removeClass(this.classes.muted),this},isMuted:function(){return this.$el.hasClass(this.classes.muted)}})},{}],22:[function(a,b,c){var d=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({events:{click:"onClick"},tagName:"button",attributes:function(){var a=[d.names.css+"-switch-editor","switch-"+d.names.css];return{id:"content-"+d.names.css,class:a.join(" ")}},render:function(){return this.$el.text(d.view.editor.tabName),this},onClick:function(a){a.preventDefault(),a.stopPropagation(),Backbone.trigger("setka:editor:adapter:editorTabs:setka:click")}})},{}],23:[function(a,b,c){var d=window.setkaEditorAdapter;b.exports=Backbone.View.extend({el:"#post",events:{submit:"onSubmit"},views:{},initialize:function(){this.createSubViews()},render:function(){return this.$el.append(this.views.settings.$el),this},createSubViews:function(){this.views.settings=new d.view.Settings({model:this.model}),this.views.nonce=new d.view.Nonce({model:this.model}),this.views.postId=new d.view.PostId({model:this.model})},onSubmit:function(){this.views.settings.render()}})},{}],24:[function(a,b,c){var d=jQuery;b.exports=Backbone.View.extend({el:"#_wpnonce",initialize:function(){this.model.set("nonce",this.get()),_.bindAll(this,"wpRefreshNonces"),d(document).on("heartbeat-tick.wp-refresh-nonces",this.wpRefreshNonces)},get:function(){return this.$el.val()},wpRefreshNonces:function(a,b){var c=b["wp-refresh-post-nonces"];c&&c.replace[this.$el.attr("id")]&&this.model.set("nonce",c.replace[this.$el.attr("id")])}})},{}],25:[function(a,b,c){b.exports=Backbone.View.extend({el:"#post_ID",initialize:function(){this.model.set("postId",this.get())},get:function(){return this.$el.val()}})},{}],26:[function(a,b,c){var d=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({tagName:"input",attributes:function(){return{type:"hidden",id:d.names.css+"-settings",name:d.names.css+"-settings",val:JSON.stringify(this.model.getDataForAutosave())}},render:function(){return this.$el.val(JSON.stringify(this.model.getDataForAutosave())),this}})},{}],27:[function(a,b,c){b.exports=Backbone.View.extend({statusClasses:{success:"notice-success",warning:"notice-warning",error:"notice-error",info:"notice-info"},removeAllStatuses:function(){_.each(this.statusClasses,function(a,b,c){this.$el.removeClass(a)},this)},setStatusSuccess:function(){this.removeAllStatuses(),this.$el.addClass(this.statusClasses.success)},setStatusWarning:function(){this.removeAllStatuses(),this.$el.addClass(this.statusClasses.warning)},setStatusError:function(){this.removeAllStatuses(),this.$el.addClass(this.statusClasses.error)},setStatusInfo:function(){this.removeAllStatuses(),this.$el.addClass(this.statusClasses.info)}})},{}],28:[function(a,b,c){var d=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({el:"#"+d.names.css+"-notice-"+d.names.css+"-cant-find-resources",initialize:function(){_.bindAll(this,"requiredResourcesNotAvailable","requiredResourcesAvailable"),this.addEvents()},addEvents:function(){Backbone.on("setka:editor:adapter:editors:setka:requiredResourcesNotAvailable",this.requiredResourcesNotAvailable),Backbone.on("setka:editor:adapter:editors:setka:requiredResourcesAvailable",this.requiredResourcesAvailable)},requiredResourcesNotAvailable:function(){this.show()},requiredResourcesAvailable:function(){this.hide()},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")}})},{}],29:[function(a,b,c){var d=(window.setkaEditorAdapter,a("./Prototype"));b.exports=d.extend({DOM:{},initialize:function(){_.bindAll(this,"onDone","onFail"),this.addEvents()},addEvents:function(){Backbone.on("setka:editor:adapter:editors:setka:snippet:done",this.onDone),Backbone.on("setka:editor:adapter:editors:setka:snippet:fail",this.onFail)},onDone:function(a,b){if(_.has(b,"errors")&&!_.isEmpty(b.errors)){var c="";_.each(b.errors,function(a,b,d){_.isEmpty(c)||(c+="\n"),c+=a.message}),window.alert(c)}},onFail:function(a,b,c,d){window.alert(translations.view.notices.setkaEditorSaveSnippet.cantConnectToWordPress)}})},{"./Prototype":27}],30:[function(a,b,c){var d=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({el:"#"+d.names.css+"-notice-"+d.names.css+"-theme-disabled",initialize:function(){_.bindAll(this,"themeDisabled","themeEnabled"),this.addEvents()},addEvents:function(){Backbone.on("setka:editor:adapter:editors:setka:themeDisabled",this.themeDisabled),Backbone.on("setka:editor:adapter:editors:setka:themeEnabled",this.themeEnabled)},themeDisabled:function(){this.show()},themeEnabled:function(){this.hide()},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")}})},{}],31:[function(a,b,c){var d=jQuery,e=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({initialize:function(){_.bindAll(this,"onDefaultTabClick"),this.addEvents()},addEvents:function(){Backbone.on("setka:editor:adapter:defaultTabClick",this.onDefaultTabClick)},removeEvents:function(){Backbone.off("setka:editor:adapter:defaultTabClick",this.onDefaultTabClick)},onDefaultTabClick:function(a){d(e.pointers.disabledEditorTabs.target).pointer(e.pointers.disabledEditorTabs.options).pointer("open")}})},{}],32:[function(a,b,c){var d=window.setkaEditorAdapter,e=setkaEditorAdapterL10n;b.exports=Backbone.View.extend({el:"#poststuff",views:{},DOM:{},classes:{collapsed:e.names.css+"-poststuff-container-1-collapsed"},initialize:function(){_.bindAll(this,"collapse","unCollapse"),this.createSubViews()},createSubViews:function(){this.views.postBody=new d.view.postStuff.postBody.PostBody({model:this.model})},collapse:function(){this.$el.addClass(this.classes.collapsed),Backbone.trigger("setka:editor:adapter:poststuff:collapsed")},unCollapse:function(){this.$el.removeClass(this.classes.collapsed),Backbone.trigger("setka:editor:adapter:poststuff:unCollapsed")}})},{}],33:[function(a,b,c){var d=jQuery;b.exports=Backbone.View.extend({el:"#post-body",DOM:{},initialize:function(){this.model.set("postBoxesColumns",this.getCols()),_.bindAll(this,"onPostBoxesColumnChange"),this.setupDOM(),this.addEvents()},setupDOM:function(){this.DOM.document=d(document)},addEvents:function(){this.DOM.document.on("postboxes-columnchange",this.onPostBoxesColumnChange)},getCols:function(){var a,b;return a=this.$el.hasClass("columns-1"),b=this.$el.hasClass("columns-2"),b&&!a?2:1},onPostBoxesColumnChange:function(){this.model.set("postBoxesColumns",this.getCols())}})},{}],34:[function(a,b,c){b.exports=Backbone.View.extend({el:"#adv-settings .editor-expand",initialize:function(){_.bindAll(this,"onLaunch","onStop"),this.addEvents()},addEvents:function(){Backbone.on("setka:editor:adapter:editors:setka:launch",this.onLaunch),Backbone.on("setka:editor:adapter:editors:setka:stop",this.onStop)},removeEvents:function(){Backbone.off("setka:editor:adapter:editors:setka:launch",this.onLaunch),Backbone.off("setka:editor:adapter:editors:setka:stop",this.onStop)},onLaunch:function(){this.hide()},onStop:function(){this.show()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}})},{}],35:[function(a,b,c){var d=window.setkaEditorAdapterL10n;b.exports=Backbone.View.extend({tagName:"script",attributes:{type:"text/javascript",async:"async"},initialize:function(){_.bindAll(this,"onLoad"),this.addEvents()},addEvents:function(){this.model.on("change:id",this.update)},getSrc:function(){return"//use.typekit.net/"+this.model.get("id")+".js"},getId:function(){return d.names.css+"-type-kit-script-"+this.model.get("id")},render:function(){this.$el.attr("id",this.getId()).attr("src",this.getSrc()),document.head.appendChild(this.el),this.el.addEventListener("load",this.onLoad)},onLoad:function(){try{Typekit.load({async:!0})}catch(a){}}})},{}]},{},[3]);
//# sourceMappingURL=editor-adapter.min.js.map