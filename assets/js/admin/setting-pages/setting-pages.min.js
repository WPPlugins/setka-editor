!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d={};window.setkaEditorSettingPages=d,d.model={Fragment:a("./model/Fragment")},d.collection={},d.view={Fragment:a("./view/Fragment")}},{"./model/Fragment":2,"./view/Fragment":3}],2:[function(a,b,c){b.exports=Backbone.Model.extend({initialize:function(){if(!this.has("id")){var a=this.getNamesRecursive();this.set("id",a.join("_"))}},getID:function(){return this.get("id")},getNamesRecursive:function(){var a=[];return this.has("parent")&&(a=this.get("parent").getNamesRecursive()),a.push(this.get("name")),a},getFragmentRole:function(){if(this.has("options")){var a=this.get("options");if(!_.isUndefined(a.attr["data-form-element-role"]))return a.attr["data-form-element-role"]}return!1}})},{}],3:[function(a,b,c){var d=window.setkaEditorSettingPages,e=jQuery;b.exports=Backbone.View.extend({fragments:{},initialize:function(){if(!this.model.has("parent")){var a="#"+this.model.get("name")+"_config",b=this.$el.find(a).val();try{var c=JSON.parse(b);this.model.set("fragments",c)}catch(a){return}finally{delete b,delete c}}var c=this.model.get("fragments");_.isEmpty(c)||(_.each(c,this.initializeSubFragment,this),this.model.unset("fragments")),_.bindAll(this,"onSelectNewCondition","onConditionChanged","afterInit"),this.addEvents(),this.model.has("parent")||Backbone.trigger("setka:editor:admin:form:afterInit",this)},initializeSubFragment:function(a){a.parent=this.model;var b=new d.model.Fragment(a),c="#"+b.getID();c+=_.isUndefined(a.options.attr["data-fragment"])?"_wrapper":"_"+a.options.attr["data-fragment"];var f=e(c);f.length?this.fragments[b.get("name")]=new d.view.Fragment({model:b,el:e(c)}):this.fragments[b.get("name")]=new d.view.Fragment({model:b})},addEvents:function(){var a=this.model.getFragmentRole();if(a)switch(a){case"conditional-switcher":e("#"+this.model.getID()).click(this.onSelectNewCondition);break;case"conditional-listener":default:Backbone.on("setka:editor:admin:form:condition:changed",this.onConditionChanged)}Backbone.on("setka:editor:admin:form:afterInit",this.afterInit)},onSelectNewCondition:function(a){Backbone.trigger("setka:editor:admin:form:condition:changed",a)},onConditionChanged:function(a){var b=this.model.get("options");_.contains(b.validation_groups,a.target.value)?this.$el.show():this.$el.hide()},afterInit:function(){var a=this.model.getFragmentRole();if("conditional-switcher"==a){var b=e("#"+this.model.getID());"checked"==b.attr("checked")&&b.click()}}})},{}]},{},[1]);
//# sourceMappingURL=setting-pages.min.js.map